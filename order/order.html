<!doctype html>
<html lang = 'en'>
<head>
  <title>WeGo Services</title>
  <meta charset = 'UTF-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href = 'style.css' rel = 'stylesheet' type = 'text/css'>
  <script>
      const type = "DryCleaning";
      let clickedOnSubmitOrder = () => {
	  debugger;
          let username = document.getElementById('username').value;
	 
          let newCardNumber = document.getElementById('card').value;
          let newCVV = document.getElementById('cvv').value;
          let newExpirationDate = document.getElementById('expiration').value;
          let newDestinationAddress = document.getElementById('destination').value;
          if (username.length == 0 || newCardNumber.length == 0 || newCVV.length == 0 || newExpirationDate.length == 0 || newDestinationAddress.length == 0) {
              alert("Please fill in all the required information.");
          }
	  else {  
         	 const order = {
              	 	"serviceType" : type,
              	 	"username" : username,
              	 	"card" : newCardNumber,
              		"cvv" : newCVV,
              		"expiration" : newExpirationDate,
              		"destination" : newDestinationAddress
          	}
          	const options = {
              		method: "POST",
              		headers: {
                  		'Content-Type' : 'application/json'
              		},
              		mode: 'no-cors',
              		body: JSON.stringify(order)
          	}
          	fetch("https://demand.team22.softwareengineeringii.com/orderHandler", options).then(function(response) {
              		console.log(response.status);
              		if (response.status == 200) {
                  		window.location.replace("https://demand.team22.softwareengineeringii.com/demand-front-end/order/confirmation.html");
              		}
              		else {
                  		alert("An error has occured.");
              		}
          	}).catch(function(error) {
  			console.error(error)
    		});
      	    }    
	}
  </script>
</head>
<body>
  <div class = 'row'>
    <div class = 'col' style = 'text-align: center'>
      <h1> WeGo Services - Dry Cleaning on Demand </h1>
      <p> place service description here </p>
      <br>
    </div>
  </div>
      <!-- order form begins here -->
      <form class = 'orderForm' id = 'orderForm' action = 'confirmation.html' method = 'post'>
        <table>
          <!-- username input -->
          <tr>
            <td>Username: </td>
            <td>
              <input type='text' id='username' size='30'>
            </td>
          </tr>
          <!-- lists payment type -->
          <!-- since it is an online order form, only credit or debit cards are allowed -->
          <!-- therefore i have listed the four main payment types for credit/debit card here -->
          <!-- feel free to add more payment types if needed -->
          <!--
          <tr>
            <td>Please choose a payment type:</td>
          </tr>
          <tr>
            <td>Visa</td>
            <td>
              <input type = 'radio' name = 'payment' value = 'visa' />
            </td>
          </tr>
          <tr>
            <td>Mastercard</td>
            <td>
              <input type = 'radio' name = 'payment' value = 'mastercard' />
            </td>
          </tr>
          <tr>
            <td>American Express</td>
            <td>
              <input type = 'radio' name = 'payment' value = 'americanexpress' />
            </td>
          </tr>
          <tr>
            <td>Discover</td>
            <td>
              <input type = 'radio' name = 'payment' value = 'discover' />
            </td>
          </tr>
          -->
          <!-- credit card information is then request -->
          <!-- which include the credit card number, the CVV, and the experation date -->
          <!-- for the experation date, i couldnt figure out how to only have the month and year -->
          <!-- so that needs to be fixed! -->
          <tr>
            <td>Credit Card Number: </td>
            <td>
              <input type='text' id='card' size='30' maxlength='16'>
            </td>
          </tr>
          <tr>
            <td>CVV: </td>
            <td>
              <input type='text' id='cvv' size='30' maxlength='3' >
            </td>
          </tr>
          <tr>
            <td>Expiration Date: </td>
            <td>
              <input type='date' id='expiration'>
            </td>
          </tr>
          <!-- address input for destination -->
          <tr>
            <td>Destination Address: </td>
            <td>
              <input type='text' id='destination' size='30'>
            </td>
          </tr>
          <tr>
          <!-- phone number -->
          <!-- is this required since it was asked during registration? -->
          <!--
          <tr>
            <td>Phone Number: </td>
            <td>
              <input type = 'text' name = 'phone' size = '30' maxlength = '10' />
            </td>
          </tr>
          -->
          <!-- submission time! -->
        
	</table>
	</form>
	<button id="submitButton" onclick="clickedOnSubmitOrder()">Submit Order</button>
</body>
</html>
